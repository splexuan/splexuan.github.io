<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="color-scheme" content="dark light">
  <title>Bookmarks</title>
  <link rel="stylesheet" type="text/css" href="static/assets/css/main.css"/>
  <link rel="stylesheet" href="static/layui-v2.8.0/layui/css/layui.css">
    <style>
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
        body {
            font: 18px/1.8 Ruluko, "PingFang SC", "Microsoft Jhenghei", "Microsoft YaHei", sans-serif;
        }
        h1 {
            margin-top: 50px;
            text-align: center;
        }
        /* 去除 iFrame 元素的内边距和边框 */
        iframe {
          display: block;
          border: none;
          margin: 0;
          padding: 0;
        }
    </style>
</head>

<body>
    <div id="body" style="width:100%;height:100%">
        <iframe src="body.html" style="width:100%;height:100%"></iframe>
    </div>
    <div class="layui-container">  
      <div class="layui-row">
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md4" style="text-align: left;" id="menu">
        </div>
      </div>
    </div>
</body>
</html>
<script src="static/jquery/jquery.js"></script>
<script src="static/layui-v2.8.0/layui/layui.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    setTimeout(function(){
        $("#body").fadeOut(2000,function(){
            $("#content").fadeIn(2000);
        });
    },2000)
});
getJsonFile()
function getJsonFile(path = "static/json_file/menu.json"){
    // 创建一个新的 XMLHttpRequest 对象
    var xhr = new XMLHttpRequest();

    // 设置请求的类型、URL 以及是否异步
    xhr.open('GET', path, true);

    // 设置响应类型为 JSON
    xhr.responseType = 'json';

    // 当请求完成时执行的回调函数
    xhr.onload = function() {
      // 如果请求成功
      if (xhr.status === 200) {
        // 获取响应数据
        var data = xhr.response;
        // 处理获取到的 JSON 数据
        html = "";
        $.each(data, function(key, value) {
          html += '<div class="layui-card"><div class="layui-card-header"><h1>'+value.head+'</h1></div><div class="layui-card-body">';
          $.each(value.list, function(k, v) {
            // console.log(v);
            html += '<a url="'+v.url+'" type="'+v.type+'">'+v.name+'</a><br/>';
          });
          html += '</div>';
          $("#menu").html(html)
        });
        console.log(html);
      }
    };

    // 发送异步请求
    xhr.send();
  }
$("#menu").on("click","a",function(){
    data = $(this);
    if(data.attr("type") == "self"){
      layer.open({
        type: 2,
        title: data.html(),
        area: ['90%', '90%'],
        content: data.attr("url") // 这里填写需要弹出的网页地址
      });
    }else if(data.attr("type") == "new"){
      window.open(data.attr("url"), '_blank');
    }
});
</script>